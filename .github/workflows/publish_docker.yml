name: Push image to docker hub as artifact
on: push
jobs:
  build-and-push:
    runs-on: ubuntu-latest
    steps:
      - name: checkout source code
        uses: actions/checkout@v2

      - name: Get image
        id: tags
        shell: bash
        run: |
          echo "::set-output name=version::$(sed -r 'ls/.+oracle-java://'
          $GITHUB_WORKSPACE/Dockerfile)"

     

      - name: Build and push to docker plain
        run: |
          docker build -t app .
          docker login -u ${{ secrets.DOCKER_HUB_USERNAME }} -p ${{ secrets.DOCKER_HUB_TOKEN }}
          docker tag app suman8285/github-actions
          docker tag local-image:tagname new-repo:tagname
          docker push suman8285/github-actions